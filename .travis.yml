language: cpp
compiler:
  - clang
before_install:
  - sudo add-apt-repository -y ppa:kalakris/cmake
  - sudo apt-get update -qq
  - sudo apt-get install -y gyp libgtest-dev xorg xserver-xorg-video-dummy libglew-dev libbox2d-dev libglm-dev
  - wget http://www.eecs.berkeley.edu/~pullin/travis/xorg.conf
  - Xorg -noreset -logfile ./10.log -config ./xorg.conf :10 &
  - cd /usr/src/gtest && sudo cmake . && sudo cmake --build . && sudo mv libg* /usr/local/lib ; cd -
  - sudo apt-get install -y xorg-dev libglu1-mesa-dev cmake
  - git clone https://github.com/glfw/glfw
  - cd glfw && mkdir build && cd build && cmake .. -DGLFW_BUILD_EXAMPLES=OFF -DGLFW_BUILD_TESTS=OFF -DGLFW_BUILD_DOCS=OFF -DBUILD_SHARED_LIBS=ON && make
  - sudo cp src/libgl* /usr/local/lib ; sudo cp -rv ../include/GLFW /usr/local/include ; cd ../../
before_script:
  - pwd
  - which sh
script: "cd test && sh ./.travis_build.sh"
branches:
  only:
    - develop
